"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[443],{216:(t,e,r)=>{r.r(e),r.d(e,{ProductPage:()=>E});var n=r(126),a=r(791),c=r(951),o=r(976),s=r(132),i=r(492),u=r(597),l=r(824),d=r.n(l),p=r(234),h=r(19),f=r(809),m=r(649),g=function(){function t(e){(0,c.Z)(this,t),(0,m.Z)(this,"dotsItems",[]),this.element=e;var r=this.element.children,n=(0,f.Z)(r,2);if(this.wrapper=n[0],this.sliderDots=n[1],this.wrapper.children){this.sliderElements=this.wrapper.children;var a=(0,f.Z)(this.wrapper.children,1);this.sliderElemFirst=a[0]}this.options=t.defaults,t.initialize(this)}return(0,o.Z)(t,[{key:"elemPrev",value:function(t){if(t=t||1,"number"==typeof this.currentElement&&"number"==typeof this.elemCount){var e=this.currentElement;this.currentElement-=t,this.currentElement<0&&(this.currentElement=this.elemCount-1),this.sliderElements[this.currentElement].style.opacity="1",this.sliderElements[e].style.opacity="0",this.options.dots&&(this.dotOn(e),this.dotOff(this.currentElement))}}},{key:"elemNext",value:function(t){if(t=t||1,"number"==typeof this.currentElement&&"number"==typeof this.elemCount){var e=this.currentElement;this.currentElement+=t,this.currentElement>=this.elemCount&&(this.currentElement=0),this.sliderElements[this.currentElement].style.opacity="1",this.sliderElements[e].style.opacity="0",this.options.dots&&(this.dotOn(e),this.dotOff(this.currentElement))}}},{key:"dotOn",value:function(t){this.indicatorDotsAll&&this.indicatorDotsAll[t]instanceof HTMLElement&&(this.indicatorDotsAll[t].style.cssText="background-color:rgb(128, 129, 150); cursor:pointer;")}},{key:"dotOff",value:function(t){this.indicatorDotsAll&&this.indicatorDotsAll[t]instanceof HTMLElement&&(this.indicatorDotsAll[t].style.cssText="background-color:rgb(102, 204, 51); cursor:default;")}}],[{key:"initialize",value:function(t){t.elemCount=t.sliderElements.length,t.currentElement=0,t.elemCount<=1&&(t.options.dots=!1),t.elemCount>=1&&t.sliderElemFirst instanceof HTMLElement&&(t.sliderElemFirst.style.opacity="1"),t.options.dots&&function(){for(var e,r="",n=0;n<t.elemCount;n++)r+='<span class="slider__dot"></span>';t.sliderDots.innerHTML=r,t.indicatorDotsAll=t.sliderDots.children;for(var a=function(r){t.indicatorDotsAll[r].addEventListener("click",function(){e=Math.abs(r-t.currentElement),r<t.currentElement?t.elemPrev(e):r>t.currentElement&&t.elemNext(e)},!1)},c=0;c<t.elemCount;c++)a(c)}(),t.dotOff(0);for(var e=1;e<t.elemCount;e++)t.dotOn(e)}}]),t}();function v(t){var e=y();return function(){var r,n=(0,u.Z)(t);if(e){var a=(0,u.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.Z)(this,r)}}function y(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}g.defaults={loop:!0,auto:!1,interval:5e3,arrows:!1,dots:!0};var C=function(t){(0,s.Z)(r,t);var e=v(r);function r(t,n){var a;(0,c.Z)(this,r),(a=e.call(this,{tag:"div",className:"slider",attributes:{id:t.toString()}})).wrapper=new h.H({tag:"div",className:"slider__wrapper"}),a.Items=[];for(var o=0;o<n.length;o++){var s=new h.H({tag:"img",className:"slider__item",attributes:{style:"background-image: url(".concat(n[o],")")}});a.Items.push(s)}return a.dots=new h.H({tag:"div",className:"slider__dots"}),a}return(0,o.Z)(r,[{key:"render",value:function(){var t;(t=this.wrapper).addChildren.apply(t,(0,n.Z)(this.Items)),this.addChildren(this.wrapper.elem,this.dots.elem),new g(this.elem)}}]),r}(h.H);function w(t){var e=D();return function(){var r,n=(0,u.Z)(t);if(e){var a=(0,u.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.Z)(this,r)}}function D(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}var x=function(t){(0,s.Z)(r,t);var e=w(r);function r(){var t;return(0,c.Z)(this,r),(t=e.call(this,{className:"product-page__cart"})).cartSectionPrice=new h.H({tag:"p",className:"product-page__cart-price",textContent:"price"}),t.cartSectionAddBtn=new h.H({tag:"button",className:"product-page__cart-add-btn",textContent:"ADD TO CART"}),t.cartSectionBuyBtn=new h.H({tag:"button",className:"product-page__cart-buy-btn",textContent:"BUY NOW"}),t}return(0,o.Z)(r,[{key:"render",value:function(){this.addChildren(this.cartSectionPrice,this.cartSectionAddBtn,this.cartSectionBuyBtn)}}]),r}(h.H);function b(t){var e=k();return function(){var r,n=(0,u.Z)(t);if(e){var a=(0,u.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.Z)(this,r)}}function k(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}var P=function(t){(0,s.Z)(r,t);var e=b(r);function r(){var t;return(0,c.Z)(this,r),(t=e.call(this,{className:"product-page__details"})).productDetailsDescr=new h.H({className:"product-page__details-descr",textContent:"Lorem ipsum dolor sit amet, officia excepteur ex fugiatest culpa et culpa duis."}),t.productDetailsDiscount=new h.H({className:"product-page__details-discount",textContent:"discount"}),t.productDetailsRating=new h.H({className:"product-page__details-rating",textContent:"rating"}),t.productDetailsStock=new h.H({className:"product-page__details-stock",textContent:"stock"}),t.productDetailsBrand=new h.H({className:"product-page__details-brand",textContent:"brand"}),t.productDetailsCategory=new h.H({className:"product-page__details-category",textContent:"category"}),t}return(0,o.Z)(r,[{key:"render",value:function(){this.addChildren(this.productDetailsDescr,this.productDetailsDiscount,this.productDetailsRating,this.productDetailsStock,this.productDetailsBrand,this.productDetailsCategory)}}]),r}(h.H);function Z(t){var e=_();return function(){var r,n=(0,u.Z)(t);if(e){var a=(0,u.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.Z)(this,r)}}function _(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}var E=function(t){(0,s.Z)(m,t);var e,r,i,u,l,f=Z(m);function m(){var t;return(0,c.Z)(this,m),(t=f.call(this,{tag:"div",className:"product-page"})).breadCrumbs=new h.H({className:"product-page__breadcrumbs",textContent:"store >> laptop >> apple >> macbook"}),t.productTitle=new h.H({tag:"h1",className:"product__title",textContent:"TITLE"}),t.productPageInner=new h.H({className:"product-page__inner"}),t.productPageDetails=new P,t.productPageDetails.render(),t.productPageCart=new x,t.productPageCart.render(),t.checkIfInCart(),t.addToCart(),t.openCart(),t}return(0,o.Z)(m,[{key:"render",value:(e=(0,a.Z)(d().mark(function t(){var e,r;return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.checkImages();case 2:e=t.sent,(r=new C(0,e)).render(),this.productPageInner.addChildren(r,this.productPageDetails,this.productPageCart),this.addChildren(this.breadCrumbs,this.productTitle,this.productPageInner);case 7:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})},{key:"updateInfo",value:(r=(0,a.Z)(d().mark(function t(){var e,r,n;return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new URLSearchParams(document.location.search).get("productId"),t.next=3,fetch("https://dummyjson.com/products/".concat(e));case 3:return r=t.sent,t.next=6,r.json();case 6:return n=t.sent,this.productTitle.elem.textContent="".concat(n.title),this.breadCrumbs.elem.textContent="store >> ".concat(n.category," >> ").concat(n.brand," >> ").concat(n.title),this.productPageDetails.productDetailsDescr.elem.textContent="Description - ".concat(n.description),this.productPageDetails.productDetailsDiscount.elem.textContent="Discount - ".concat(n.discountPercentage,"%"),this.productPageDetails.productDetailsRating.elem.textContent="Rating - ".concat(n.rating," stars"),this.productPageDetails.productDetailsStock.elem.textContent="Stock - ".concat(n.stock),this.productPageDetails.productDetailsBrand.elem.textContent="Brand - ".concat(n.brand),this.productPageDetails.productDetailsCategory.elem.textContent="Category - ".concat(n.category),this.productPageCart.cartSectionPrice.elem.textContent="".concat(n.price,"$"),t.abrupt("return",n);case 17:case"end":return t.stop()}},t,this)})),function(){return r.apply(this,arguments)})},{key:"checkImages",value:(i=(0,a.Z)(d().mark(function t(){var e,r,c=this;return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.updateInfo();case 2:return e=t.sent,r=[],e.images.map(function(){var t=(0,a.Z)(d().mark(function t(e){var n;return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.imageUrlToBase64(e);case 2:return n=t.sent,r.push(n),t.abrupt("return",n);case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()),t.abrupt("return",new Promise(function(t){setTimeout(function(){t((0,n.Z)(new Set(r)))},1500)}));case 6:case"end":return t.stop()}},t,this)})),function(){return i.apply(this,arguments)})},{key:"imageUrlToBase64",value:(u=(0,a.Z)(d().mark(function t(e){var r,n;return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return r=t.sent,t.next=5,r.blob();case 5:return n=t.sent,t.abrupt("return",new Promise(function(t){var e=new FileReader;e.readAsDataURL(n),e.onloadend=function(){t(e.result)}}));case 7:case"end":return t.stop()}},t)})),function(t){return u.apply(this,arguments)})},{key:"checkIfInCart",value:function(){var t,e=JSON.parse(window.localStorage.getItem("productsList")||"[]"),r=null!==(t=new URLSearchParams(document.location.search).get("productId"))&&void 0!==t?t:-1;void 0!==e.find(function(t){return t.id===+r})?(this.productPageCart.cartSectionAddBtn.elem.textContent="Already in cart",this.productPageCart.cartSectionAddBtn.elem.setAttribute("ableToAdd","false")):(this.productPageCart.cartSectionAddBtn.elem.textContent="Add to cart",this.productPageCart.cartSectionAddBtn.elem.setAttribute("ableToAdd","true"))}},{key:"addToCart",value:(l=(0,a.Z)(d().mark(function t(){var e,r,n,a,c,o=this;return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=JSON.parse(window.localStorage.getItem("productsList")||"[]"),r=null!==(c=new URLSearchParams(document.location.search).get("productId"))&&void 0!==c?c:-1,t.next=4,fetch("https://dummyjson.com/products/".concat(r));case 4:return n=t.sent,t.next=7,n.json();case 7:(a=t.sent).amount=1,this.productPageCart.cartSectionAddBtn.elem.addEventListener("click",function(t){var r=t.target;"true"===r.getAttribute("ableToAdd")&&(e.push(a),window.localStorage.setItem("productsList",JSON.stringify(e)),p.l.header.updateTotal(),p.l.header.Cart.updateCartNum(),r.setAttribute("ableToAdd","false"),o.checkIfInCart())});case 10:case"end":return t.stop()}},t,this)})),function(){return l.apply(this,arguments)})},{key:"openCart",value:function(){var t=this;this.productPageCart.cartSectionBuyBtn.elem.addEventListener("click",function(){t.addToCart(),window.location.hash="#cart",setTimeout(function(){var t=document.querySelector(".modal");t.classList.remove("hide"),t.classList.add("show")},1e3)})}}]),m}(h.H)}}]);